<!DOCTYPE html><html lang="zh-CN" data-default-color-scheme="auto"><head><meta charset="UTF-8"><link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png"><link rel="icon" href="/img/favicon.ico"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=5,shrink-to-fit=no"><meta http-equiv="x-ua-compatible" content="ie=edge"><meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests"><meta name="theme-color" content="#2f4154"><meta name="author" content="Kovacs"><meta name="keywords" content="Docker,Linux,Harbor,Registry"><meta name="description" content="Project Harbor is an enterprise-class registry server, which extends the open source Docker Registry server by adding the functionality usually required by an enterprise, such as security, control, an"><meta property="og:type" content="article"><meta property="og:title" content="Harbor 企业级 Docker Registry 初试"><meta property="og:url" content="https://mritd.com/2016/06/27/harbor-enterprise-docker-registry-part1/index.html"><meta property="og:site_name" content="Kovacs"><meta property="og:description" content="Project Harbor is an enterprise-class registry server, which extends the open source Docker Registry server by adding the functionality usually required by an enterprise, such as security, control, an"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_prepare.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_up.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_contianer.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_homepage.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_userspace.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_createproject.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_composeerror.jpeg"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_projectuser.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_projectuserrole.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_loginmritd.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_pushmritdimages.png"><meta property="og:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_mritdshow.png"><meta property="article:published_time" content="2016-06-27T07:04:20.000Z"><meta property="article:modified_time" content="2016-06-27T07:04:20.000Z"><meta property="article:author" content="Kovacs"><meta property="article:tag" content="Linux"><meta property="article:tag" content="Docker"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:image" content="https://cdn.oss.link/markdown/hexo_docker_harbor_prepare.png"><meta name="twitter:creator" content="@kovacs_orz"><meta name="twitter:site" content="https://twitter.com/kovacs_orz"><title>Harbor 企业级 Docker Registry 初试 - Kovacs</title><link rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css"><link rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css"><link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_lbnruvf0jn.css"><link rel="stylesheet" href="/css/main.css"><link id="highlight-css" rel="stylesheet" href="/css/highlight.css"><link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css"><script id="fluid-configs">var Fluid=window.Fluid||{};Fluid.ctx=Object.assign({},Fluid.ctx);var CONFIG={hostname:"mritd.com",root:"/",version:"1.9.7",typing:{enable:!0,typeSpeed:80,cursorChar:"_",loop:!1,scope:[]},anchorjs:{enable:!0,element:"h1,h2,h3,h4,h5,h6",placement:"right",visible:"hover",icon:"❡"},progressbar:{enable:!0,height_px:3,color:"#29d",options:{showSpinner:!0,trickleSpeed:100}},code_language:{enable:!0,default:"TEXT"},copy_btn:!0,image_caption:{enable:!0},image_zoom:{enable:!0,img_url_replace:["",""]},toc:{enable:!0,placement:"right",headingSelector:"h1,h2,h3,h4,h5,h6",collapseDepth:3},lazyload:{enable:!0,loading_img:"/img/loading.gif",onlypost:!1,offset_factor:2},web_analytics:{enable:!0,follow_dnt:!0,baidu:null,google:{measurement_id:"G-H06NPECR0Z"},tencent:{sid:null,cid:null},woyaola:null,cnzz:null,leancloud:{app_id:null,app_key:null,server_url:null,path:"window.location.pathname",ignore_local:!1}},search_path:"/local-search.xml",include_content_in_search:!0};if(CONFIG.web_analytics.follow_dnt){var dntVal=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack;Fluid.ctx.dnt=dntVal&&(dntVal.startsWith("1")||dntVal.startsWith("yes")||dntVal.startsWith("on"))}</script><script src="/js/utils.js"></script><script src="/js/color-schema.js"></script><script async>Fluid.ctx.dnt||Fluid.utils.createScript("https://www.googletagmanager.com/gtag/js?id=G-H06NPECR0Z",(function(){function a(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],a("js",new Date),a("config","G-H06NPECR0Z")}))</script><meta name="generator" content="Hexo 7.0.0"><link rel="alternate" href="/atom.xml" title="Kovacs" type="application/atom+xml">
<link rel="alternate" href="/rss.xml" title="Kovacs" type="application/rss+xml">
</head><body><header><div class="header-inner" style="height:70vh"><nav id="navbar" class="navbar fixed-top navbar-expand-lg navbar-dark scrolling-navbar"><div class="container"><a class="navbar-brand" href="/"><strong>Kovacs</strong> </a><button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation"><div class="animated-icon"><span></span><span></span><span></span></div></button><div class="collapse navbar-collapse" id="navbarSupportedContent"><ul class="navbar-nav ml-auto text-center"><li class="nav-item"><a class="nav-link" href="/" target="_self"><i class="iconfont icon-home-fill"></i> <span>首页</span></a></li><li class="nav-item"><a class="nav-link" href="/archives/" target="_self"><i class="iconfont icon-archive-fill"></i> <span>归档</span></a></li><li class="nav-item"><a class="nav-link" href="/categories/" target="_self"><i class="iconfont icon-category-fill"></i> <span>分类</span></a></li><li class="nav-item"><a class="nav-link" href="/tags/" target="_self"><i class="iconfont icon-tags-fill"></i> <span>标签</span></a></li><li class="nav-item"><a class="nav-link" href="/about/" target="_self"><i class="iconfont icon-user-fill"></i> <span>关于</span></a></li><li class="nav-item"><a class="nav-link" href="/friends/" target="_self"><i class="iconfont icon-link-fill"></i> <span>友链</span></a></li><li class="nav-item" id="search-btn"><a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search"><i class="iconfont icon-search"></i></a></li><li class="nav-item" id="color-toggle-btn"><a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle"><i class="iconfont icon-dark" id="color-toggle-icon"></i></a></li></ul></div></div></nav><div id="banner" class="banner" parallax="true" style="background:url(/img/default.jpg) no-repeat center center;background-size:cover"><div class="full-bg-img"><div class="mask flex-center" style="background-color:rgba(0,0,0,.3)"><div class="banner-text text-center fade-in-up"><div class="h2"><span id="subtitle" data-typed-text="Harbor 企业级 Docker Registry 初试"></span></div><div class="mt-3"><span class="post-meta mr-2"><i class="iconfont icon-author" aria-hidden="true"></i> Kovacs </span><span class="post-meta"><i class="iconfont icon-date-fill" aria-hidden="true"></i> <time datetime="2016-06-27 15:04" pubdate>2016年6月27日 下午</time></span></div><div class="mt-1"><span class="post-meta mr-2"><i class="iconfont icon-chart"></i> 1.3k 字 </span><span class="post-meta mr-2"><i class="iconfont icon-clock-fill"></i> 11 分钟</span></div></div></div></div></div></div></header><main><div class="container-fluid nopadding-x"><div class="row nomargin-x"><div class="side-col d-none d-lg-block col-lg-2"></div><div class="col-lg-8 nopadding-x-md"><div class="container nopadding-x-md" id="board-ctn"><div id="board"><article class="post-content mx-auto"><h1 id="seo-header">Harbor 企业级 Docker Registry 初试</h1><div class="markdown-body"><h2 id="一、介绍"><a href="#一、介绍" class="headerlink" title="一、介绍"></a>一、介绍</h2><blockquote><p>Project Harbor is an enterprise-class registry server, which extends the open source Docker Registry server by adding the functionality usually required by an enterprise, such as security, control, and management. Harbor is primarily designed to be a private registry - providing the needed security and control that enterprises require. It also helps minimize bandwidth usage, which is helpful to both improve productivity (local network access) as well as performance (for those with poor internet connectivity).</p></blockquote><p>简单的说，Harbor 是一个企业级的 Docker Registry，可以实现 images 的私有存储和日志统计权限控制等功能，并支持创建多项目(Harbor 提出的概念)，基于官方 Registry V2 实现。</p><h2 id="二、环境准备"><a href="#二、环境准备" class="headerlink" title="二、环境准备"></a>二、环境准备</h2><p>本文所使用的环境如下 :</p><ul><li>Ubuntu 14.04</li><li>Docker 1.11.2</li><li>docker-compose 1.6.2</li></ul><h3 id="2-1、安装-Docker"><a href="#2-1、安装-Docker" class="headerlink" title="2.1、安装 Docker"></a>2.1、安装 Docker</h3><p>执行以下命令安装 Docker</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">curl -fsSL https://get.docker.io | bash<br></code></pre></td></tr></table></figure><h3 id="2-2、安装-docker-compose"><a href="#2-2、安装-docker-compose" class="headerlink" title="2.2、安装 docker-compose"></a>2.2、安装 docker-compose</h3><p>默认的 <a target="_blank" rel="noopener" href="https://docs.docker.com/compose/install/">官方文档</a> 安装命令如下 :</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">curl -L https://github.com/docker/compose/releases/download/1.6.2/docker-compose-`<span class="hljs-built_in">uname</span> -s`-`<span class="hljs-built_in">uname</span> -m` &gt; /usr/local/bin/docker-compose<br></code></pre></td></tr></table></figure><p><strong>经过本人测试，其文件托管在亚马逊上，伟大的防火墙成功阻止下载……</strong></p><p>**有能力的童鞋可以使用梯子，我已经下载好了一个 <a target="_blank" rel="noopener" href="https://cdn.oss.link/files/docker-compose">点击下载</a>**；下载后直接 cp 到 <code>/usr/local/bin</code> 下并给与可执行权限即可。</p><h2 id="三、搭建-Harbor"><a href="#三、搭建-Harbor" class="headerlink" title="三、搭建 Harbor"></a>三、搭建 Harbor</h2><h3 id="3-1、克隆源码"><a href="#3-1、克隆源码" class="headerlink" title="3.1、克隆源码"></a>3.1、克隆源码</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">git <span class="hljs-built_in">clone</span> https://github.com/vmware/harbor<br></code></pre></td></tr></table></figure><h3 id="3-2、修改配置"><a href="#3-2、修改配置" class="headerlink" title="3.2、修改配置"></a>3.2、修改配置</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> harbor/Deploy/<br>vim harbor.cfg<br></code></pre></td></tr></table></figure><p>配置样例如下 :</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-comment">## Configuration file of Harbor</span><br><br><span class="hljs-comment">#The IP address or hostname to access admin UI and registry service.</span><br><span class="hljs-comment">#DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.</span><br><span class="hljs-comment"># 指定 hostname，一般为IP，或者域名，用于登录 Web UI 界面</span><br>hostname = 10.211.55.17<br><br><span class="hljs-comment">#The protocol for accessing the UI and token/notification service, by default it is http.</span><br><span class="hljs-comment">#It can be set to https if ssl is enabled on nginx.</span><br><span class="hljs-comment"># URL 访问方式，SSL 需要配置 nginx</span><br>ui_url_protocol = http<br><br><span class="hljs-comment">#Email account settings for sending out password resetting emails.</span><br><span class="hljs-comment"># 邮件相关信息配置，如忘记密码发送邮件</span><br>email_server = smtp.xxxxxx.com<br>email_server_port = 465<br>email_username = reg@mritd.me<br>email_password = xxxxxx<br>email_from = docker &lt;reg@mritd.me&gt;<br>email_ssl = <span class="hljs-literal">true</span><br><br><span class="hljs-comment">##The password of Harbor admin, change this before any production use.</span><br><span class="hljs-comment"># 默认的 Harbor 的管理员密码，管理员用户名默认 admin</span><br>harbor_admin_password = Harbor12345<br><br><span class="hljs-comment">##By default the auth mode is db_auth, i.e. the credentials are stored in a local database.</span><br><span class="hljs-comment">#Set it to ldap_auth if you want to verify a user&#x27;s credentials against an LDAP server.</span><br><span class="hljs-comment"># 指定 Harbor 的权限验证方式，Harbor 支持本地的 mysql 数据存储密码，同时也支持 LDAP</span><br>auth_mode = db_auth<br><br><span class="hljs-comment">#The url for an ldap endpoint.</span><br><span class="hljs-comment"># 如果采用了 LDAP，此处填写 LDAP 地址</span><br>ldap_url = ldaps://ldap.mydomain.com<br><br><span class="hljs-comment">#The basedn template to look up a user in LDAP and verify the user&#x27;s password.</span><br><span class="hljs-comment"># LADP 验证密码的方式(我特么没用过这么高级的玩意)</span><br>ldap_basedn = uid=%s,ou=people,dc=mydomain,dc=com<br><br><span class="hljs-comment">#The password for the root user of mysql db, change this before any production use.</span><br><span class="hljs-comment"># mysql 数据库 root 账户密码</span><br>db_password = root123<br><br><span class="hljs-comment">#Turn on or off the self-registration feature</span><br><span class="hljs-comment"># 是否允许开放注册</span><br>self_registration = on<br><br><span class="hljs-comment">#Turn on or off the customize your certicate</span><br><span class="hljs-comment"># 允许自签名证书</span><br>customize_crt = on<br><br><span class="hljs-comment">#fill in your certicate message</span><br><span class="hljs-comment"># 自签名证书信息</span><br>crt_country = CN<br>crt_state = State<br>crt_location = CN<br>crt_organization = mritd<br>crt_organizationalunit = mritd<br>crt_commonname = mritd.me<br>crt_email = reg.mritd.me<br><span class="hljs-comment">#####</span><br></code></pre></td></tr></table></figure><h3 id="3-3、生成相关配置"><a href="#3-3、生成相关配置" class="headerlink" title="3.3、生成相关配置"></a>3.3、生成相关配置</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> harbor/Deploy/<br>./prepare<br></code></pre></td></tr></table></figure><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_prepare.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_prepare"></p><h3 id="3-4、编译-image-并启动"><a href="#3-4、编译-image-并启动" class="headerlink" title="3.4、编译 image 并启动"></a>3.4、编译 image 并启动</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> harbor/Deploy/<br>docker-compose up -d<br></code></pre></td></tr></table></figure><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_up.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_up"></p><h3 id="3-5、启动后相关容器"><a href="#3-5、启动后相关容器" class="headerlink" title="3.5、启动后相关容器"></a>3.5、启动后相关容器</h3><p><strong>正常启动成功后会有 5 个 Contianer :</strong></p><ul><li>Proxy : 由Nginx 服务器构成的反向代理</li><li>Registry : 由Docker官方的开源registry 镜像构成的容器实例</li><li>UI : 即架构中的core services, 构成此容器的代码是Harbor项目的主体</li><li>Mysql : 由官方MySql镜像构成的数据库容器</li><li>Log : 运行着rsyslogd的容器，通过log-driver的形式收集其他容器的日志</li></ul><p><strong>这几个 Contianer 通过 Docker link 的形式连接在一起，在容器之间通过容器名字互相访问。对终端用户而言，只需要暴露 proxy（即Nginx）的服务端口</strong></p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_contianer.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_contianer"></p><h2 id="四、访问-Web-UI-并测试"><a href="#四、访问-Web-UI-并测试" class="headerlink" title="四、访问 Web UI 并测试"></a>四、访问 Web UI 并测试</h2><h3 id="4-1、主页"><a href="#4-1、主页" class="headerlink" title="4.1、主页"></a>4.1、主页</h3><p><strong>默认的访问地址即为 <code>harbor.cfg</code> 中 <code>hostname</code> 地址，直接访问即可，如下</strong></p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_homepage.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_homepage"></p><p><strong>如果 <code>harbor.cfg</code> 中 <code>self_registration</code> 属性设置为 <code>off</code>，那么普通用户将无法自己实现注册，只能由管理员创建用户，主页右上角的注册按钮也会消失。</strong></p><h3 id="4-2、登录"><a href="#4-2、登录" class="headerlink" title="4.2、登录"></a>4.2、登录</h3><p><strong>Harbor 默认管理员用户为 <code>admin</code>，密码在 <code>harbor.cfg</code> 中设置过，默认的是 <code>Harbor12345</code>，可直接登陆</strong></p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_userspace.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_userspace"></p><h3 id="4-3、创建私有项目"><a href="#4-3、创建私有项目" class="headerlink" title="4.3、创建私有项目"></a>4.3、创建私有项目</h3><p><strong>Harbor 有一个项目的概念，项目名可以理解为 Docker Hub 的用户名，其下可以后很多 images，Harbor 的项目必须登录后方可 push，公有项目和私有项目的区别是对其他用户是否可见</strong></p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_createproject.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_createproject"></p><h3 id="4-4、push-镜像"><a href="#4-4、push-镜像" class="headerlink" title="4.4、push 镜像"></a>4.4、push 镜像</h3><h4 id="4-4-1、设置-http-仓库地址"><a href="#4-4-1、设置-http-仓库地址" class="headerlink" title="4.4.1、设置 http 仓库地址"></a>4.4.1、设置 http 仓库地址</h4><p>由于采用了默认的 http 方式连接，而 Docker 认为这是不安全的，所以在 push 之前需要调整一下 docker 配置，编辑 <code>/etc/default/docker</code> 增加如下内容</p><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs sh">DOCKER_OPTS=<span class="hljs-string">&quot;<span class="hljs-variable">$DOCKER_OPTS</span> --insecure-registry 10.211.55.17&quot;</span><br></code></pre></td></tr></table></figure><p>**其中 IP 地址要指向 <code>harbor.cfg</code> 中的 <code>hostname</code>**，然后执行 <code>docker-compose stop</code> 停掉所有 Contianer，再执行 <code>service docker restart</code> 重启 Dokcer 服务，最后执行 <code>docker-compose start</code> 即可。</p><p><strong>注意 : Docker 服务重启后，执行 <code>docker-compose start</code> 时有一定几率出现如下错误(或者目录已存在等错误)，此时在 <code>docker-compose stop</code> 一下然后在启动即可，实在不行再次重启 Dokcer 服务，千万不要手贱的去删文件(别问我怎么知道的)</strong></p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_composeerror.jpeg" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_composeerror"></p><h4 id="4-4-2、Harbor-项目和权限-角色"><a href="#4-4-2、Harbor-项目和权限-角色" class="headerlink" title="4.4.2、Harbor 项目和权限(角色)"></a>4.4.2、Harbor 项目和权限(角色)</h4><p><strong>用户本身拥有的项目，登陆后可直接 push，其他的用户创建的项目取决于项目是否添加了对应用户和权限，</strong></p><p><strong>也就是说用户是否可以向一个项目 push 镜像，取决于权限(角色)设置，如下所示，在项目中可以设置成员和其权限</strong></p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_projectuser.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_projectuser"></p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_projectuserrole.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_projectuserrole"></p><p><strong>对于权限(角色)，<code>Project Admin</code> 和 <code>Developer</code> 可以有 push 的权限，而 <code>Guest</code> 只能查看和 pull</strong></p><h4 id="4-4-3、push-镜像"><a href="#4-4-3、push-镜像" class="headerlink" title="4.4.3、push 镜像"></a>4.4.3、push 镜像</h4><p>首先使用一个对目标项目具有 push 权限的用户登录，以下 push 的目标是 mritd 项目，test1 用户在项目里定义为 <code>Developer</code>，所以登录后 push 即可</p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_loginmritd.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_loginmritd"></p><p>然后 <code>tag</code> 一个 image，名称一定要标准( <code>registryAddress[:端口]/项目/imageName[:tag]</code> )，最后将其 push 即可</p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_pushmritdimages.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_pushmritdimages"></p><p>最后可在 Web UI 中查看刚刚 push 的 image</p><p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_mritdshow.png" srcset="/img/loading.gif" lazyload alt="hexo_docker_harbor_mritdshow"></p><p><strong>到此结束 Thanks</strong></p></div><hr><div><div class="post-metas my-3"><div class="post-meta mr-3 d-flex align-items-center"><i class="iconfont icon-category"></i> <span class="category-chains"><span class="category-chain"><a href="/categories/docker/" class="category-chain-item">Docker</a></span></span></div><div class="post-meta"><i class="iconfont icon-tags"></i> <a href="/tags/linux/" class="print-no-link">#Linux</a> <a href="/tags/docker/" class="print-no-link">#Docker</a></div></div><div class="license-box my-3"><div class="license-title"><div>Harbor 企业级 Docker Registry 初试</div><div>https://mritd.com/2016/06/27/harbor-enterprise-docker-registry-part1/</div></div><div class="license-meta"><div class="license-meta-item"><div>作者</div><div>Kovacs</div></div><div class="license-meta-item license-meta-date"><div>发布于</div><div>2016年6月27日</div></div><div class="license-meta-item"><div>许可协议</div><div><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="BY - 署名"><i class="iconfont icon-by"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="NC - 非商业性使用"><i class="iconfont icon-nc"></i> </span></a><a class="print-no-link" target="_blank" href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><span class="hint--top hint--rounded" aria-label="SA - 相同方式共享"><i class="iconfont icon-sa"></i></span></a></div></div></div><div class="license-icon iconfont"></div></div><div class="post-prevnext my-3"><article class="post-prev col-6"><a href="/2016/07/02/encryption-and-introduction-to-openssl/" title="互联网加密及 OpenSSL 介绍和简单使用"><i class="iconfont icon-arrowleft"></i> <span class="hidden-mobile">互联网加密及 OpenSSL 介绍和简单使用</span> <span class="visible-mobile">上一篇</span></a></article><article class="post-next col-6"><a href="/2016/06/22/apply-for-a-startssl-certificate-for-free/" title="免费申请 StartSSL 证书"><span class="hidden-mobile">免费申请 StartSSL 证书</span> <span class="visible-mobile">下一篇</span> <i class="iconfont icon-arrowright"></i></a></article></div></div><article id="comments" lazyload><div class="disqus" style="width:100%"><div id="disqus_thread"></div><script type="text/javascript">var disqus_config=function(){this.page.url="https://mritd.com/2016/06/27/harbor-enterprise-docker-registry-part1/",this.page.identifier="/2016/06/27/harbor-enterprise-docker-registry-part1/"};Fluid.utils.loadComments("#disqus_thread",(function(){var e=document,t=e.createElement("script");t.src="//bleem.disqus.com/embed.js",t.setAttribute("data-timestamp",new Date),(e.head||e.body).appendChild(t)}))</script><noscript>Please enable JavaScript to view the comments</noscript></div></article></article></div></div></div><div class="side-col d-none d-lg-block col-lg-2"><aside class="sidebar" style="margin-left:-1rem"><div id="toc"><p class="toc-header"><i class="iconfont icon-list"></i> <span>目录</span></p><div class="toc-body" id="toc-body"></div></div></aside></div></div></div><a id="scroll-top-button" aria-label="TOP" href="#" role="button"><i class="iconfont icon-arrowup" aria-hidden="true"></i></a><div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable modal-lg" role="document"><div class="modal-content"><div class="modal-header text-center"><h4 class="modal-title w-100 font-weight-bold">搜索</h4><button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button></div><div class="modal-body mx-3"><div class="md-form mb-5"><input type="text" id="local-search-input" class="form-control validate"> <label data-error="x" data-success="v" for="local-search-input">关键词</label></div><div class="list-group" id="local-search-result"></div></div></div></div></div></main><footer><div class="footer-inner"><div class="footer-content"><a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> <i class="iconfont icon-docker"></i> <a href="https://bandwagonhost.com/aff.php?aff=61367" target="_blank" rel="nofollow noopener"><span>BandwagonHost</span></a></div></div></footer><script src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js"></script><link rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css"><script>NProgress.configure({showSpinner:!0,trickleSpeed:100}),NProgress.start(),window.addEventListener("load",(function(){NProgress.done()}))</script><script src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js"></script><script src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js"></script><script src="/js/events.js"></script><script src="/js/plugins.js"></script><script src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js"></script><script>!function(t,e){var i=Fluid.plugins.typing,n=e.getElementById("subtitle");n&&i&&i(n.getAttribute("data-typed-text"))}(window,document)</script><script src="/js/img-lazyload.js"></script><script>Fluid.utils.createScript("https://lib.baomitu.com/tocbot/4.18.2/tocbot.min.js",(function(){var t=jQuery("#toc");if(0!==t.length&&window.tocbot){var i=jQuery("#board-ctn").offset().top;window.tocbot.init(Object.assign({tocSelector:"#toc-body",contentSelector:".markdown-body",linkClass:"tocbot-link",activeLinkClass:"tocbot-active-link",listClass:"tocbot-list",isCollapsedClass:"tocbot-is-collapsed",collapsibleClass:"tocbot-is-collapsible",scrollSmooth:!0,includeTitleTags:!0,headingsOffset:-i},CONFIG.toc)),t.find(".toc-list-item").length>0&&t.css("visibility","visible"),Fluid.events.registerRefreshCallback((function(){if("tocbot"in window){tocbot.refresh();var t=jQuery("#toc");if(0===t.length||!tocbot)return;t.find(".toc-list-item").length>0&&t.css("visibility","visible")}}))}}))</script><script src="https://lib.baomitu.com/clipboard.js/2.0.11/clipboard.min.js"></script><script>Fluid.plugins.codeWidget()</script><script>Fluid.utils.createScript("https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js",(function(){window.anchors.options={placement:CONFIG.anchorjs.placement,visible:CONFIG.anchorjs.visible},CONFIG.anchorjs.icon&&(window.anchors.options.icon=CONFIG.anchorjs.icon);var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(window.anchors.options.class="anchorjs-link-left"),window.anchors.add(o.join(", ")),Fluid.events.registerRefreshCallback((function(){if("anchors"in window){anchors.removeAll();var n=(CONFIG.anchorjs.element||"h1,h2,h3,h4,h5,h6").split(","),o=[];for(var s of n)o.push(".markdown-body > "+s.trim());"left"===CONFIG.anchorjs.placement&&(anchors.options.class="anchorjs-link-left"),anchors.add(o.join(", "))}}))}))</script><script>Fluid.utils.createScript("https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js",(function(){Fluid.plugins.fancyBox()}))</script><script>Fluid.plugins.imageCaption()</script><script src="/js/local-search.js"></script><script src="/js/boot.js"></script><noscript><div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div></noscript></body></html>