

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/apple-touch-icon.png">
  <link rel="icon" type="image/png" href="/img/favicon.ico">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="Upward, not Northward.">
  <meta name="author" content="bleem">
  <meta name="keywords" content="漠然,bleem,mritd">
  <title>Harbor 企业级 Docker Registry 初试 - bleem</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.0.0/styles/atom-one-dark.min.css" />
    
  

  


<!-- 主题依赖的图标库，不要自行修改 -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_pf9vaxs7x7b.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- 自定义样式保持在最底部 -->


  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 4.2.0"><link rel="alternate" href="/atom.xml" title="bleem" type="application/atom+xml">
<link rel="alternate" href="/rss.xml" title="bleem" type="application/rss+xml">
</head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>bleem</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                归档
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/friends/">
                <i class="iconfont icon-link-fill"></i>
                友链
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/default.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="container page-header text-center fade-in-up">
            <span class="h2" id="subtitle">
              
            </span>

            
              <div class="mt-3">
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2006-01-02 15:04" pubdate>
        2006年1月2日 下午
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.5k 字
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      21
       分钟
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto" id="post">
            <!-- SEO header -->
            <h1 style="display: none">Harbor 企业级 Docker Registry 初试</h1>
            
            <div class="markdown-body" id="post-body">
              <h2 id="一、介绍"><a href="#一、介绍" class="headerlink" title="一、介绍"></a>一、介绍</h2><blockquote>
<p>Project Harbor is an enterprise-class registry server, which extends the open source Docker Registry server by adding the functionality usually required by an enterprise, such as security, control, and management. Harbor is primarily designed to be a private registry - providing the needed security and control that enterprises require. It also helps minimize bandwidth usage, which is helpful to both improve productivity (local network access) as well as performance (for those with poor internet connectivity).</p>
</blockquote>
<p>简单的说，Harbor 是一个企业级的 Docker Registry，可以实现 images 的私有存储和日志统计权限控制等功能，并支持创建多项目(Harbor 提出的概念)，基于官方 Registry V2 实现。</p>
<h2 id="二、环境准备"><a href="#二、环境准备" class="headerlink" title="二、环境准备"></a>二、环境准备</h2><p>本文所使用的环境如下 :</p>
<ul>
<li>Ubuntu 14.04</li>
<li>Docker 1.11.2</li>
<li>docker-compose 1.6.2</li>
</ul>
<h3 id="2-1、安装-Docker"><a href="#2-1、安装-Docker" class="headerlink" title="2.1、安装 Docker"></a>2.1、安装 Docker</h3><p>执行以下命令安装 Docker</p>
<div class="hljs"><pre><code class="hljs sh">curl -fsSL https://get.docker.io | bash</code></pre></div>

<h3 id="2-2、安装-docker-compose"><a href="#2-2、安装-docker-compose" class="headerlink" title="2.2、安装 docker-compose"></a>2.2、安装 docker-compose</h3><p>默认的 <a href="https://docs.docker.com/compose/install/" target="_blank" rel="noopener">官方文档</a> 安装命令如下 :</p>
<div class="hljs"><pre><code class="hljs sh">curl -L https://github.com/docker/compose/releases/download/1.6.2/docker-compose-`uname -s`-`uname -m` &gt; /usr/<span class="hljs-built_in">local</span>/bin/docker-compose</code></pre></div>

<p><strong>经过本人测试，其文件托管在亚马逊上，伟大的防火墙成功阻止下载……</strong></p>
<p><strong>有能力的童鞋可以使用梯子，我已经下载好了一个 <a href="https://cdn.oss.link/files/docker-compose" target="_blank" rel="noopener">点击下载</a></strong>；下载后直接 cp 到 <code>/usr/local/bin</code> 下并给与可执行权限即可。</p>
<h2 id="三、搭建-Harbor"><a href="#三、搭建-Harbor" class="headerlink" title="三、搭建 Harbor"></a>三、搭建 Harbor</h2><h3 id="3-1、克隆源码"><a href="#3-1、克隆源码" class="headerlink" title="3.1、克隆源码"></a>3.1、克隆源码</h3><div class="hljs"><pre><code class="hljs sh">git <span class="hljs-built_in">clone</span> https://github.com/vmware/harbor</code></pre></div>

<h3 id="3-2、修改配置"><a href="#3-2、修改配置" class="headerlink" title="3.2、修改配置"></a>3.2、修改配置</h3><div class="hljs"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> harbor/Deploy/
vim harbor.cfg</code></pre></div>

<p>配置样例如下 :</p>
<div class="hljs"><pre><code class="hljs sh"><span class="hljs-comment">## Configuration file of Harbor</span>

<span class="hljs-comment">#The IP address or hostname to access admin UI and registry service.</span>
<span class="hljs-comment">#DO NOT use localhost or 127.0.0.1, because Harbor needs to be accessed by external clients.</span>
<span class="hljs-comment"># 指定 hostname，一般为IP，或者域名，用于登录 Web UI 界面</span>
hostname = 10.211.55.17

<span class="hljs-comment">#The protocol for accessing the UI and token/notification service, by default it is http.</span>
<span class="hljs-comment">#It can be set to https if ssl is enabled on nginx.</span>
<span class="hljs-comment"># URL 访问方式，SSL 需要配置 nginx</span>
ui_url_protocol = http

<span class="hljs-comment">#Email account settings for sending out password resetting emails.</span>
<span class="hljs-comment"># 邮件相关信息配置，如忘记密码发送邮件</span>
email_server = smtp.xxxxxx.com
email_server_port = 465
email_username = reg@mritd.me
email_password = xxxxxx
email_from = docker &lt;reg@mritd.me&gt;
email_ssl = <span class="hljs-literal">true</span>

<span class="hljs-comment">##The password of Harbor admin, change this before any production use.</span>
<span class="hljs-comment"># 默认的 Harbor 的管理员密码，管理员用户名默认 admin</span>
harbor_admin_password = Harbor12345

<span class="hljs-comment">##By default the auth mode is db_auth, i.e. the credentials are stored in a local database.</span>
<span class="hljs-comment">#Set it to ldap_auth if you want to verify a user's credentials against an LDAP server.</span>
<span class="hljs-comment"># 指定 Harbor 的权限验证方式，Harbor 支持本地的 mysql 数据存储密码，同时也支持 LDAP</span>
auth_mode = db_auth

<span class="hljs-comment">#The url for an ldap endpoint.</span>
<span class="hljs-comment"># 如果采用了 LDAP，此处填写 LDAP 地址</span>
ldap_url = ldaps://ldap.mydomain.com

<span class="hljs-comment">#The basedn template to look up a user in LDAP and verify the user's password.</span>
<span class="hljs-comment"># LADP 验证密码的方式(我特么没用过这么高级的玩意)</span>
ldap_basedn = uid=%s,ou=people,dc=mydomain,dc=com

<span class="hljs-comment">#The password for the root user of mysql db, change this before any production use.</span>
<span class="hljs-comment"># mysql 数据库 root 账户密码</span>
db_password = root123

<span class="hljs-comment">#Turn on or off the self-registration feature</span>
<span class="hljs-comment"># 是否允许开放注册</span>
self_registration = on

<span class="hljs-comment">#Turn on or off the customize your certicate</span>
<span class="hljs-comment"># 允许自签名证书</span>
customize_crt = on

<span class="hljs-comment">#fill in your certicate message</span>
<span class="hljs-comment"># 自签名证书信息</span>
crt_country = CN
crt_state = State
crt_location = CN
crt_organization = mritd
crt_organizationalunit = mritd
crt_commonname = mritd.me
crt_email = reg.mritd.me
<span class="hljs-comment">#####</span></code></pre></div>

<h3 id="3-3、生成相关配置"><a href="#3-3、生成相关配置" class="headerlink" title="3.3、生成相关配置"></a>3.3、生成相关配置</h3><div class="hljs"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> harbor/Deploy/
./prepare</code></pre></div>

<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_prepare.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_prepare"></p>
<h3 id="3-4、编译-image-并启动"><a href="#3-4、编译-image-并启动" class="headerlink" title="3.4、编译 image 并启动"></a>3.4、编译 image 并启动</h3><div class="hljs"><pre><code class="hljs sh"><span class="hljs-built_in">cd</span> harbor/Deploy/
docker-compose up -d</code></pre></div>

<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_up.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_up"></p>
<h3 id="3-5、启动后相关容器"><a href="#3-5、启动后相关容器" class="headerlink" title="3.5、启动后相关容器"></a>3.5、启动后相关容器</h3><p><strong>正常启动成功后会有 5 个 Contianer :</strong></p>
<ul>
<li>Proxy : 由Nginx 服务器构成的反向代理</li>
<li>Registry : 由Docker官方的开源registry 镜像构成的容器实例</li>
<li>UI : 即架构中的core services, 构成此容器的代码是Harbor项目的主体</li>
<li>Mysql : 由官方MySql镜像构成的数据库容器</li>
<li>Log : 运行着rsyslogd的容器，通过log-driver的形式收集其他容器的日志</li>
</ul>
<p><strong>这几个 Contianer 通过 Docker link 的形式连接在一起，在容器之间通过容器名字互相访问。对终端用户而言，只需要暴露 proxy（即Nginx）的服务端口</strong></p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_contianer.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_contianer"></p>
<h2 id="四、访问-Web-UI-并测试"><a href="#四、访问-Web-UI-并测试" class="headerlink" title="四、访问 Web UI 并测试"></a>四、访问 Web UI 并测试</h2><h3 id="4-1、主页"><a href="#4-1、主页" class="headerlink" title="4.1、主页"></a>4.1、主页</h3><p><strong>默认的访问地址即为 <code>harbor.cfg</code> 中 <code>hostname</code> 地址，直接访问即可，如下</strong></p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_homepage.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_homepage"></p>
<p><strong>如果 <code>harbor.cfg</code> 中 <code>self_registration</code> 属性设置为 <code>off</code>，那么普通用户将无法自己实现注册，只能由管理员创建用户，主页右上角的注册按钮也会消失。</strong></p>
<h3 id="4-2、登录"><a href="#4-2、登录" class="headerlink" title="4.2、登录"></a>4.2、登录</h3><p><strong>Harbor 默认管理员用户为 <code>admin</code>，密码在 <code>harbor.cfg</code> 中设置过，默认的是 <code>Harbor12345</code>，可直接登陆</strong></p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_userspace.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_userspace"></p>
<h3 id="4-3、创建私有项目"><a href="#4-3、创建私有项目" class="headerlink" title="4.3、创建私有项目"></a>4.3、创建私有项目</h3><p><strong>Harbor 有一个项目的概念，项目名可以理解为 Docker Hub 的用户名，其下可以后很多 images，Harbor 的项目必须登录后方可 push，公有项目和私有项目的区别是对其他用户是否可见</strong></p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_createproject.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_createproject"></p>
<h3 id="4-4、push-镜像"><a href="#4-4、push-镜像" class="headerlink" title="4.4、push 镜像"></a>4.4、push 镜像</h3><h4 id="4-4-1、设置-http-仓库地址"><a href="#4-4-1、设置-http-仓库地址" class="headerlink" title="4.4.1、设置 http 仓库地址"></a>4.4.1、设置 http 仓库地址</h4><p>由于采用了默认的 http 方式连接，而 Docker 认为这是不安全的，所以在 push 之前需要调整一下 docker 配置，编辑 <code>/etc/default/docker</code> 增加如下内容</p>
<div class="hljs"><pre><code class="hljs sh">DOCKER_OPTS=<span class="hljs-string">"<span class="hljs-variable">$DOCKER_OPTS</span> --insecure-registry 10.211.55.17"</span></code></pre></div>

<p><strong>其中 IP 地址要指向 <code>harbor.cfg</code> 中的 <code>hostname</code></strong>，然后执行 <code>docker-compose stop</code> 停掉所有 Contianer，再执行 <code>service docker restart</code> 重启 Dokcer 服务，最后执行 <code>docker-compose start</code> 即可。</p>
<p><strong>注意 : Docker 服务重启后，执行 <code>docker-compose start</code> 时有一定几率出现如下错误(或者目录已存在等错误)，此时在 <code>docker-compose stop</code> 一下然后在启动即可，实在不行再次重启 Dokcer 服务，千万不要手贱的去删文件(别问我怎么知道的)</strong></p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_composeerror.jpeg" srcset="/img/loading.gif" alt="hexo_docker_harbor_composeerror"></p>
<h4 id="4-4-2、Harbor-项目和权限-角色"><a href="#4-4-2、Harbor-项目和权限-角色" class="headerlink" title="4.4.2、Harbor 项目和权限(角色)"></a>4.4.2、Harbor 项目和权限(角色)</h4><p><strong>用户本身拥有的项目，登陆后可直接 push，其他的用户创建的项目取决于项目是否添加了对应用户和权限，</strong></p>
<p><strong>也就是说用户是否可以向一个项目 push 镜像，取决于权限(角色)设置，如下所示，在项目中可以设置成员和其权限</strong></p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_projectuser.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_projectuser"></p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_projectuserrole.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_projectuserrole"></p>
<p><strong>对于权限(角色)，<code>Project Admin</code> 和 <code>Developer</code> 可以有 push 的权限，而 <code>Guest</code> 只能查看和 pull</strong></p>
<h4 id="4-4-3、push-镜像"><a href="#4-4-3、push-镜像" class="headerlink" title="4.4.3、push 镜像"></a>4.4.3、push 镜像</h4><p>首先使用一个对目标项目具有 push 权限的用户登录，以下 push 的目标是 mritd 项目，test1 用户在项目里定义为 <code>Developer</code>，所以登录后 push 即可</p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_loginmritd.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_loginmritd"></p>
<p>然后 <code>tag</code> 一个 image，名称一定要标准( <code>registryAddress[:端口]/项目/imageName[:tag]</code> )，最后将其 push 即可</p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_pushmritdimages.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_pushmritdimages"></p>
<p>最后可在 Web UI 中查看刚刚 push 的 image</p>
<p><img src="https://cdn.oss.link/markdown/hexo_docker_harbor_mritdshow.png" srcset="/img/loading.gif" alt="hexo_docker_harbor_mritdshow"></p>
<p><strong>到此结束 Thanks</strong></p>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/docker/">Docker</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/linux/">Linux</a>
                    
                      <a class="hover-with-bg" href="/tags/docker/">Docker</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">本博客所有文章除特别声明外，均采用 <a rel="license noopener" href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 国际许可协议进行许可，转载请注明出处。</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2006/01/02/harbor-enterprise-docker-registry-part3/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">Harbor 企业级 Docker Registry HTTPS配置</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2006/01/02/how-to-use-nexus/">
                        <span class="hidden-mobile">Nexus 私服使用教程</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div class="disqus" style="width:100%">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
      var disqus_config = function () {
        this.page.url = 'https://mritd.com/2006/01/02/harbor-enterprise-docker-registry-part1/';
        this.page.identifier = '/2006/01/02/harbor-enterprise-docker-registry-part1/';
      };
      function loadDisqus() {
        (function () {
          var d = document,
            s = d.createElement('script');
          s.src = '//' + 'mritd' + '.disqus.com/embed.js';
          s.setAttribute('data-timestamp', new Date());
          (d.head || d.body).appendChild(s);
        })();
      }
      waitElementVisible('disqus_thread', loadDisqus);
    </script>
    <noscript>Please enable JavaScript to view the
      <a href="https://disqus.com/?ref_noscript" target="_blank" rel="nofollow noopener noopener">comments powered by Disqus.</a>
    </noscript>
  </div>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div id="tocbot"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    
  </main>

  
    <a id="scroll-top-button" href="#" role="button">
      <i class="iconfont icon-arrowup" aria-hidden="true"></i>
    </a>
  

  
    <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
  

  

  

  <footer class="mt-5">
  <div class="text-center py-3">
    <div>
      <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a>
      <i class="iconfont icon-love"></i>
      <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener">
        <span>Fluid</span></a>
    </div>
    

    

    
  </div>
</footer>

<!-- SCRIPTS -->
<script  src="https://cdn.staticfile.org/jquery/3.4.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.4.1/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/main.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>
  <script  src="/js/clipboard-use.js" ></script>







  <script  src="https://cdn.staticfile.org/tocbot/4.11.1/tocbot.min.js" ></script>
  <script>
    $(document).ready(function () {
      var boardCtn = $('#board-ctn');
      var boardTop = boardCtn.offset().top;

      tocbot.init({
        tocSelector: '#tocbot',
        contentSelector: '#post-body',
        headingSelector: 'h1,h2,h3,h4,h5,h6',
        linkClass: 'tocbot-link',
        activeLinkClass: 'tocbot-active-link',
        listClass: 'tocbot-list',
        isCollapsedClass: 'tocbot-is-collapsed',
        collapsibleClass: 'tocbot-is-collapsible',
        collapseDepth: 3,
        scrollSmooth: true,
        headingsOffset: -boardTop
      });
      if ($('.toc-list-item').length > 0) {
        $('#toc').css('visibility', 'visible');
      }
    });
  </script>



  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    var typed = new Typed('#subtitle', {
      strings: [
        '  ',
        "Harbor 企业级 Docker Registry 初试&nbsp;",
      ],
      cursorChar: "_",
      typeSpeed: 80,
      loop: false,
    });
    typed.stop();
    $(document).ready(function () {
      $(".typed-cursor").addClass("h2");
      typed.start();
    });
  </script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.2.2/anchor.min.js" ></script>
  <script>
    anchors.options = {
      placement: "right",
      visible: "hover",
      
      icon: "❡"
      
    };
    var el = "h1,h2,h3,h4,h5,h6".split(",");
    var res = [];
    for (item of el) {
      res.push(".markdown-body > " + item)
    }
    anchors.add(res.join(", "))
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    var path = "/local-search.xml";
    var inputArea = document.querySelector("#local-search-input");
    inputArea.onclick = function () {
      searchFunc(path, 'local-search-input', 'local-search-result');
      this.onclick = null
    }
  </script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />

  <script>
    $('#post img:not(.no-zoom img, img[no-zoom]), img[zoom]').each(
      function () {
        var element = document.createElement('a');
        $(element).attr('data-fancybox', 'images');
        $(element).attr('href', $(this).attr('src'));
        $(this).wrap(element);
      }
    );
  </script>




















</body>
</html>
